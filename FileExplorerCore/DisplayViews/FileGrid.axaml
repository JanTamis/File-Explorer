<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
						 xmlns:models="clr-namespace:FileExplorerCore.Models"
						 xmlns:converters="using:FileExplorerCore.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="FileExplorerCore.DisplayViews.FileGrid">
	<UserControl.Resources>
		<converters:PathToImageConverter x:Key="imageConverter" />
		<converters:EditedOnConverter x:Key="editedOnConverter" />
		<converters:ExtensionConverter x:Key="extensionConverter" />
		<converters:SizeConverter x:Key="sizeConverter" />
		<converters:FileNameConverter x:Key="fileNameConverter" />
	</UserControl.Resources>
	<ScrollViewer>
		<ItemsRepeater Items="{Binding Files}"
									 Margin="0 0 0 5"
									 x:Name="fileList">
			<ItemsRepeater.Layout>
				<UniformGridLayout ItemsStretch="Uniform"
													 ItemsJustification="Center"
													 MinColumnSpacing="7.5"
													 MinRowSpacing="5"/>
			</ItemsRepeater.Layout>

			<ItemsRepeater.Styles>
				<Style Selector="ListBoxItem">
					<Setter Property="Background" Value="Transparent" />
					<Setter Property="Template">
						<ControlTemplate>
							<Border CornerRadius="10" 
											Name="PART_ContentPresenter"
											BoxShadow="0 0 20 -5 Black"
											Margin="7.5">
								<ContentPresenter ClipToBounds="true"
																	Background="{TemplateBinding Background}"
																	BorderBrush="{TemplateBinding BorderBrush}"
																	BorderThickness="{TemplateBinding BorderThickness}"
																	ContentTemplate="{TemplateBinding ContentTemplate}"
																	Content="{TemplateBinding Content}"
																	Padding="{TemplateBinding Padding}"
																	VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
																	HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" />
							</Border>
						</ControlTemplate>
					</Setter>
				</Style>

				<Style Selector="ListBoxItem /template/ Border#PART_ContentPresenter">
					<Setter Property="TextBlock.FontWeight" Value="Normal" />
					<Setter Property="Background" Value="{DynamicResource SystemChromeDisabledHighColor}" />
					<Setter Property="TextBlock.FontSize" Value="{DynamicResource ControlContentThemeFontSize}" />
				</Style>

				<!--  Disabled State  -->
				<Style Selector="ListBoxItem:disabled /template/ Border#PART_ContentPresenter">
					<Setter Property="TextBlock.Foreground" Value="{DynamicResource SystemControlDisabledBaseMediumLowBrush}" />
				</Style>

				<!--  PointerOver State  -->
				<Style Selector="ListBoxItem:pointerover /template/ Border#PART_ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemListLowColor}" />
				</Style>
				<Style Selector="ListBoxItem:pointerover /template/ ContentPresenter#PART_ContentPresenter">
					<Setter Property="TextBlock.Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
				</Style>

				<!--  Pressed State  -->
				<Style Selector="ListBoxItem:pressed /template/ Border#PART_ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListMediumBrush}" />
				</Style>
				<Style Selector="ListBoxItem:pressed /template/ ContentPresenter">
					<Setter Property="TextBlock.Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
				</Style>

				<!--  Selected State  -->
				<Style Selector="ListBoxItem:selected /template/ Border#PART_ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentLowBrush}" />
				</Style>
				<Style Selector="ListBoxItem:selected /template/ Border">
					<Setter Property="TextBlock.Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
				</Style>

				<!--  Selected Unfocused State  -->
				<Style Selector="ListBoxItem:selected:not(:focus) /template/ Border#PART_ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentLowBrush}" />
				</Style>
				<Style Selector="ListBoxItem:selected:not(:focus) /template/ ContentPresenter#PART_ContentPresenter">
					<Setter Property="TextBlock.Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
				</Style>

				<!--  Selected PointerOver State  -->
				<Style Selector="ListBoxItem:selected:pointerover /template/ Border#PART_ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentMediumBrush}" />
				</Style>
				<Style Selector="ListBoxItem:selected:pointerover /template/ ContentPresenter">
					<Setter Property="TextBlock.Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
				</Style>

				<!--  Selected Pressed State  -->
				<Style Selector="ListBoxItem:selected:pressed /template/ Border#PART_ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentHighBrush}" />
				</Style>
				<Style Selector="ListBoxItem:selected:pressed /template/ Border#PART_ContentPresenter">
					<Setter Property="TextBlock.Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
				</Style>
			</ItemsRepeater.Styles>

			<ItemsRepeater.ItemTemplate>
				<DataTemplate DataType="models:FileModel">
					<ListBoxItem Margin="0"
											 ToolTip.Tip="{Binding Name}"
											 IsSelected="{Binding IsSelected}"
											 Cursor="Hand"
											 VerticalContentAlignment="Center"
											 HorizontalContentAlignment="Center"
											 Height="170">
						<StackPanel>
							<Viewbox Width="{Binding ImageSize}"
											 Height="{Binding ImageSize}"
											 Margin="4" 
											 RenderTransform="{Binding ImageTransform}">
									<Image Source="{Binding Image}" />
							</Viewbox>

							<TextBlock Text="{Binding Name}"
												 TextTrimming="CharacterEllipsis"
												 HorizontalAlignment="Center"
												 Margin="4 0"/>

							<TextBlock Text="{Binding, Converter={StaticResource sizeConverter}}"
												 FontSize="12"
												 Foreground="{DynamicResource SystemBaseMediumColor}"
												 HorizontalAlignment="Center" />
						</StackPanel>
					</ListBoxItem>
				</DataTemplate>
			</ItemsRepeater.ItemTemplate>
		</ItemsRepeater>
	</ScrollViewer>
</UserControl>
